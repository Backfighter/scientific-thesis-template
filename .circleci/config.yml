version: 2
jobs:
   build:
     docker:
       - image: koppor/texlive
     steps:
       - checkout
       # test lualatex compilation
       - run: lualatex main-german.tex
       - run: lualatex -shell-escape main-minted-german.tex
       - run: lualatex main-english.tex
       - run: lualatex main-paderborn-german.tex
       - run: lualatex main-paderborn-english.tex
       # cleanup
       - run: git clean -xdf
       # normal compilation and release to homepage
       - run: latexmk main-german.tex
       - run: latexmk main-minted-german.tex
       - run: latexmk main-english.tex
       - run: latexmk main-paderborn-german.tex
       - run: latexmk main-paderborn-english.tex
       - run: mkdir build && cp -r README.md main-*.pdf .github/_config.yml docs/* build/
       - run: if [ "$CIRCLE_BRANCH" == "master" ]; then .circleci/deploy-ghpages.sh build/; fi
